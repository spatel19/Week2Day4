<!DOCTYPE html>
<html >
  <head>
    <meta charset="UTF-8">
    <title>Horizons AJAX Inline Exercise</title>
  </head>

  <body>
    <h1 id="out">Put the name of the city/metro area with the largest population in this <code>&lt;h1&gt;</code> tag</h1>

    <p>The goal of this exercise is to download data from a remote source using AJAX and then upload this page.</p>

    <p>jQuery is already loaded on this page. You should use it.</p>

    <ol>
      <li>Write you solution in the <code>script</code> tags at the bottom of this file (<code>/week02/day4/examples/ajax/population.html</code>).</li>
      <li>Open <a href="http://horizons-json-cors.s3-website-us-east-1.amazonaws.com/data.json">http://horizons-json-cors.s3-website-us-east-1.amazonaws.com/data.json</a> to check out what our data looks like.</li>
      <li>Load this data on this page using <code>$.ajax()</code>.</li>
      <li>Find out which city is the largest by population.</li>
      <li>Display the name of the city in the h1 tag at the top, it has the id <code>"out"</code>.</li>
    </ol>
    <script src='https://code.jquery.com/jquery-2.2.4.min.js'></script>

    <script>
      // YOUR CODE HERE

      $.ajax({
        url: 'http://horizons-json-cors.s3-website-us-east-1.amazonaws.com/data.json',
        success: function(resp){
          $('ol').append(JSON.stringify(resp))

        }})
        $.ajax({
          url: 'http://horizons-json-cors.s3-website-us-east-1.amazonaws.com/data.json',
          success: function(resp){
          var Array1 = resp
          console.log(resp)
          var numArr = [];
          resp.forEach(function(element){
            for( var key in element){
            if(element[key] > 1000000){
              numArr.push(element[key])
            }}});
          console.log(numArr)
          var mathmaxarr = function getMathMax(arr){
            return Math.max.apply(null, arr);
          };
          console.log(mathmaxarr(numArr))
          resp.forEach(function(element){
            for(var key in element){
              console.log(key, element[key], mathmaxarr(numArr), element[key] === mathmaxarr(numArr));
              if(element[key] === mathmaxarr(numArr)){
                console.log(element[key])
                $('h1').html(element['City / Urban area'])
              }
            }
          })
          // if(mathmaxarr(numArr) === 17400000){
          //   $('h1').html('Mexico City')
          // }
          // if(mathmaxarr(numArr) === 16425000){
          //   $('h1').html('Osaka/Kobe/Kyoto')
          // }
          // if(mathmaxarr(numArr) === 14750000){
          //   $('h1').html('Manila')
          // }
          // if(mathmaxarr(numArr) === 14350000){
          //   $('h1').html('Mumbai')
          // }
          // if(mathmaxarr(numArr) === 17800000){
          //   $('h1').html('New York Metro')
          // }
          // if(mathmaxarr(numArr) === 17700000){
          //   $('h1').html('Sao Paulo')
          // }
          // if(mathmaxarr(numArr) === 17400000){
          //   $('h1').html('Mexico City')
          // }
          }

     });
    </script>
  </body>
</html>
